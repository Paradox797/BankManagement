<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>tabs demo</title>

        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"
        integrity="sha256-xLD7nhI62fcsEZK2/v8LsBcb4lG7dgULkuXoXB/j91c=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    </head>


    <body>

        <div id="tabs" style="background-color: #397785;width: 100%; float: left; margin-top: 50px;">
            <ul>
                <li><a href="#fragment-1"><span>One</span></a></li>
                <li><a href="#fragment-2"><span>Two</span></a></li>
                <li><a href="#fragment-3"><span>Three</span></a></li>
            </ul>
            <div id="fragment-1">
                <h2> Form 1</h2>
                <p>Fill the form and submit it.</p>
                <div style="margin:20px 0;"></div>
                <div class="easyui-panel" title="New Topic" style="width:100%;max-width:400px;padding:30px 60px;">
                    <form id="f1" method="post" >
                        <div style="margin-bottom:20px">
                            <input class="easyui-textbox" name="name" style="width:100%"
                                   data-options="label:'Name:',required:true" placeholder="Enter Name">
                        </div>
                        <div style="margin-bottom:20px">
                            <input class="easyui-textbox" name="email" style="width:100%"
                                   data-options="label:'Email:',required:true,validType:'email'" placeholder="Enter email">
                        </div>
                        <div style="margin-bottom:20px">
                            <input class="easyui-textbox" name="address" style="width:100%"
                                   data-options="label:'Subject:',required:true" placeholder="Enter Address">
                        </div>
                        <div style="margin-bottom:20px">
                            <select class="easyui-combobox" name="type" label="type" style="width:100%">
                                <option value="bg">Birth ID</option>
                                <option value="ar">NID</option>
                                <option value="ca">Passport ID</option>
                            </select>
                        </div>


                        <button type="button" id="submitButton" class="btn btn-primary">
                            Submit
                        </button>

                    </form>
                    <div id="additionalInfo" style="display:none ; background-color: #fff; padding: 20px; border-radius: 5px; box-shadow: 0px 0px 10px rgba(0,0,0,0.3); max-width: 80%; justify-content: center; align-items: center;">
                        <!-- Additional information content goes here -->
                        <p>Successfully Submitted!!! Thanks for your Cooperation.</p>
                        <button type="button" id="closeButton" class="btn btn-secondary">Close</button>
                    </div>
                </div>
            </div>

            <div id="fragment-2">
                <h2> Form 2</h2>
                <p>Fill the form and submit it.</p>
                <div style="margin:20px 0;"></div>
                <div class="easyui-panel" title="New Topic" style="width:100%;max-width:400px;padding:30px 60px;">
                    <form id="f2" method="post">
                        <div style="margin-bottom:20px">
                            <input class="easyui-textbox" name="name2" style="width:100%"
                                   data-options="label:'Name:',required:true" placeholder="Enter Name">
                        </div>
                        <div style="margin-bottom:20px">
                            <input class="easyui-textbox" name="email2" style="width:100%"
                                   data-options="label:'Email:',required:true,validType:'email'" placeholder="Enter email">
                        </div>
                        <div style="margin-bottom:20px">
                            <input class="easyui-textbox" name="amount" style="width:100%" type="number"
                                   data-options="label:'Subject:',required:true" placeholder="Enter Amount">
                        </div>
                        <div id="divPortion" style="display: none;margin-bottom:20px">
                            <!-- Hidden div portion content here... -->
                            <input class="easyui-textbox" name="quantity" style="width:100%" type="number"
                                   data-options="label:'Subject:',required:true" placeholder="Enter number of account">
                            This portion will be shown after the logic is fulfilled.
                        </div>

                        <button type="button" id="submitButton2" class="btn btn-primary">
                            Submit
                        </button>

                    </form>

                    <div id="additionalInfo2" style="display:none ; background-color: #fff; padding: 20px; border-radius: 5px; box-shadow: 0px 0px 10px rgba(0,0,0,0.3); max-width: 80%; justify-content: center; align-items: center;">
                        <!-- Additional information content goes here -->
                        <p>Successfully Submitted!!! Thanks for your Cooperation.</p>
                        <button type="button" id="closeButton2" class="btn btn-secondary">Close</button>
                    </div>

                </div>
            </div>
            <div id="fragment-3">
                <h2> Form 3</h2>
                <p>Fill the form and submit it.</p>
                <div style="margin:20px 0;"></div>
                <div class="easyui-panel" title="New Topic" style="width:100%;max-width:400px;padding:30px 60px;">
                    <form id="f3" method="post" >
                        <div style="margin-bottom:20px">
                            <input class="easyui-textbox" name="name3" style="width:100%"
                                   data-options="label:'Name:',required:true" placeholder="Enter Name">
                        </div>
                        <div style="margin-bottom:20px">
                            <input class="easyui-textbox" name="email3" style="width:100%"
                                   data-options="label:'Email:',required:true,validType:'email'" placeholder="Enter email">
                        </div>
                        <div style="margin-bottom:20px">
                            <input class="easyui-textbox" name="address3" style="width:100%"
                                   data-options="label:'Subject:',required:true" placeholder="Enter Address">
                        </div>

                        <div style="margin-bottom:20px">
                            <select class="easyui-combobox" name="cw"  id="cw" style="width:100%">

                                <option value="en" selected="selected">Phone</option>
                                <option value="et">Email</option>


                            </select>
                        </div>


                        <button type="button" id="submitButton3" class="btn btn-primary">
                            Submit
                        </button>

                    </form>
                    <!-- works as Modal -->
                    <div id="additionalInfo3" style="display:none; background-color: #fff; padding: 20px; border-radius: 5px; box-shadow: 0px 0px 10px rgba(0,0,0,0.3); max-width: 80%; justify-content: center; align-items: center;">
                        <!-- Additional information content goes here -->
                        <p>Successfully Submitted!!! Thanks for your Cooperation.</p>
                        <button type="button" id="closeButton3" class="btn btn-secondary">Close</button>
                    </div>



                </div>
            </div>


        </div>



        <script>
            // Use noConflict() to avoid conflicts with other libraries using $
            //$.noConflict();
            //jQuery(document).ready(function ($) {

            //  $("#tabs").tabs();
            //});

            (function ($) {
                $(document).ready(function () {
                    $("#tabs").tabs();

                });
            })(jQuery);
        </script>


        <script>

            $(document).ready(function () {
                var loadedTabs = JSON.parse(localStorage.getItem('loadedTabs'));
                let index = -1;
                for (let m = 0; m < loadedTabs.length; m++) {
                    const pageData = loadedTabs[m][0];
                    if (pageData.pageUrl === 'CustomerDetails.html') {
                        index = m;
                        break;
                    }
                }
                // var quantity = $('input[name="quantity"]').attr('quantity');

                // Check if there is any saved form data in local storage for the specific tab
                var formData = JSON.parse(localStorage.getItem('formData')) || {};
                var currentTabContentId = 'CustomerDetails.html';
                // console.log(currentTabContentId) // Variable to store the currently active tab content ID

                // Load the saved form data into the form fields
                $('form [name]').each(function () {
                    var fieldName = $(this).attr('name');
                    var formid = $(this).closest('form').attr('id');
                    //var formid = inputId;
                    if (!formData[currentTabContentId]) {
                        formData[currentTabContentId] = {};
                    }
                    if (!formData[currentTabContentId][formid]) {
                        formData[currentTabContentId][formid] = {};
                    }
                    // Set the value of the input field based on the form data
                    if (formData[currentTabContentId][formid][fieldName]) {
                        $(this).val(formData[currentTabContentId][formid][fieldName]);
                    }
                });

                // Add event listeners to form fields to save data to local storage on input change
                $('form [name]').on('input', function () {
                    //var formid = $(this).attr('id');
                    var formid = $(this).closest('form').attr('id');
                    var fieldName = $(this).attr('name');
                    var fieldValue = $(this).val();
                    //var quantity = $(this).attr('quantity');

                    // Update the form data for the current tab content ID
                    if (!formData[currentTabContentId]) {
                        formData[currentTabContentId] = {};
                    }
                    if (!formData[currentTabContentId][formid]) {
                        formData[currentTabContentId][formid] = {};
                    }
                    formData[currentTabContentId][formid][fieldName] = fieldValue;

                    if (fieldName === "amount") {
                        //if (fieldName == "amount") {
                        if (formData[currentTabContentId][formid][fieldName] > 4000) {
                            $('#divPortion').show(); // Show the div portion
                            localStorage.setItem('formData', JSON.stringify(formData));
                        } else {
                            $('#divPortion').hide(); // Hide the div portion
                            formData[currentTabContentId][formid]["quantity"] = 0;
                            localStorage.setItem('formData', JSON.stringify(formData));

                        }
                    }
                    // Save the updated form data to local storage
                    else {
                        localStorage.setItem('formData', JSON.stringify(formData));
                    }

                   


                });




            });


        </script>

        <script>
                      //tab1
                      
            $(document).ready(function () {
                $("#submitButton").click(function () {
                    var name = $("input[name='name']").val();
                    var email = $("input[name='email']").val();
                    var address = $("input[name='address']").val();
                    //var id = "2"; // You can set the ID value here

                    $.ajax({
                        type: "POST",
                        url: "FormServlet", // Your servlet URL
                        data: {
                            name: name,
                            email: email,
                            address: address
                                    // id: id
                        },
                        success: function (response) {
                            $("#result").text(response);
                            
                            var formData = JSON.parse(localStorage.getItem('formData'));
                delete formData['CustomerDetails.html']['f1']; // Clear tab 1 data
                localStorage.setItem('formData', JSON.stringify(formData)); // Update local storage
                            
                            
                             $("#f1").trigger("reset");
                             $("#f1").hide();
                             $("#additionalInfo").show();
                        },
                        error: function (xhr, status, error) {
                            $("#result").text("Error: " + error);
                        }
                    });
                    
                });

                $("#closeButton").click(function () {
                    // Show the original form
                    $("#f1").show();
                    // Hide the additional content
                    $("#additionalInfo").hide();
                });

            });
        </script>


        <script>
            //tab2
             
            $(document).ready(function () {
                $("#submitButton2").click(function () {
                    console.log("Submit button 2 clicked!"); // Debug statement
                    var name = $("input[name='name2']").val();
                    var email = $("input[name='email2']").val();
                    var amount = $("input[name='amount']").val();
                    var quantity = $("input[name='quantity']").val();// You can set the ID value here

                    $.ajax({
                        type: "POST",
                        url: "CustomerFormtwo", //  servlet URL
                        data: {
                            name: name,
                            email: email,
                            amount: amount,
                            quantity: quantity
                                    // id: id
                        },
                        success: function (response) {
                            $("#result").text(response);
                            
                             var formData = JSON.parse(localStorage.getItem('formData'));
                delete formData['CustomerDetails.html']['f2']; // Clear tab 1 data
                localStorage.setItem('formData', JSON.stringify(formData)); // Update local storage
                            
                            
                             $("#f2").trigger("reset"); // Reset form fields
                             $("#f2").hide();
                             $("#additionalInfo2").show();
                        },
                        error: function (xhr, status, error) {
                            $("#result").text("Error: " + error);
                        }
                    });
                   
                });

                $("#closeButton2").click(function () {
                    // Show the original form
                    $("#f2").show();
                    // Hide the additional content
                    $("#additionalInfo2").hide();
                });
            });

        </script>


        <script>
            //tab3
         
            $(document).ready(function () {
                
                $("#submitButton3").click(function () {
                    var name = $("input[name='name3']").val();
                    var email = $("input[name='email3']").val();
                    var address = $("input[name='address3']").val();
                    //                            var cw = $("select[name='cw']").val();
                    var cw = document.getElementById('cw').value;


                    $.ajax({
                        type: "POST",
                        url: "FormServletTab3", // Your servlet URL
                        data: {
                            name: name,
                            email: email,
                            address: address,
                            cw: cw
                        },
                        success: function (response) {
                            $("#result").text(response);
                            
                             var formData = JSON.parse(localStorage.getItem('formData'));
                delete formData['CustomerDetails.html']['f3']; // Clear tab 1 data
                localStorage.setItem('formData', JSON.stringify(formData)); // Update local storage
                            
                            
                             $("#f3").trigger("reset");
                             $("#f3").hide();
                             $("#additionalInfo3").show();
                        },
                        error: function (xhr, status, error) {
                            $("#result").text("Error: " + error);
                        }
                    });
                });
                 $("#closeButton3").click(function () {
                    // Show the original form
                    $("#f3").show();
                    // Hide the additional content
                    $("#additionalInfo3").hide();
                });
                
            });
        </script>



        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>

    </body>

</html>